<div class="min-h-[80vh] flex flex-col items-center justify-center">

    <div class="text-center mb-8 max-w-lg">
        <div
            class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-50 text-primary-default mb-4">
            <mat-icon class="icon-md">event_note</mat-icon>
        </div>
        <h2 class="text-2xl font-semibold text-fg-default">Nuevo Plan de Comidas</h2>
        <p class="text-fg-muted mt-2">
            Elige cuándo empezar y por cuántos días. Nosotros te ayudaremos a organizarlo.
        </p>
    </div>

    <div class="w-full max-w-lg bg-white border border-border-default rounded-lg shadow-sm overflow-hidden">

        <div class="bg-canvas-subtle px-6 py-4 border-b border-border-default">
            <h3 class="text-sm font-semibold text-fg-default m-0">Configuración del Plan</h3>
        </div>

        <div class="p-6">
            <form [formGroup]="form" (ngSubmit)="next()" class="space-y-5">

                <div>
                    <label class="block text-xs font-semibold text-fg-default mb-1.5">
                        Fecha de inicio
                        <mat-icon class="icon-xs text-fg-muted align-middle ml-1"
                            matTooltip="El primer día de tu planificación">info</mat-icon>
                    </label>
                    <mat-form-field appearance="outline" class="w-full compact-form-field">
                        <input matInput [matDatepicker]="picker" formControlName="startDate" [min]="minDate"
                            placeholder="Selecciona una fecha">
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>

                <div>
                    <label class="block text-xs font-semibold text-fg-default mb-1.5">
                        Duración (días)
                    </label>
                    <div class="relative">
                        <mat-form-field appearance="outline" class="w-full compact-form-field">
                            <input matInput type="number" formControlName="days" min="1" max="30">
                            <span matSuffix class="text-xs text-fg-muted pr-3">días</span>
                        </mat-form-field>
                    </div>
                    <p class="text-xs text-fg-muted mt-1">
                        Recomendado: 7 días para una semana completa.
                    </p>
                </div>

                <button type="submit" [disabled]="form.invalid || processing()"
                    class="w-full bg-primary-default hover:bg-primary-hover text-white py-2.5 rounded-md text-sm font-semibold shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2 mt-4">
                    <span *ngIf="processing()"
                        class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></span>
                    {{ processing() ? 'Generando...' : 'Generar Plan' }}
                </button>

            </form>
        </div>

        <div class="bg-canvas-subtle px-6 py-3 border-t border-border-default text-center">
            <a routerLink="/dashboard" class="text-xs text-fg-muted hover:text-accent-default no-underline">
                Cancelar y volver al dashboard
            </a>
        </div>

    </div>
</div>