<mat-sidenav-container class="shell-container h-screen bg-canvas-default">

    <mat-sidenav #drawer class="shell-sidenav w-64 border-r border-border-default bg-canvas-subtle"
        [mode]="(isDesktop$ | async) ? 'side' : 'over'" [opened]="(isDesktop$ | async) ? true : false">

        <div class="h-16 flex align-items-center px-4 border-b border-border-default bg-canvas-subtle">
            <div class="flex items-center gap-2 text-fg-default">
                <div class="w-8 h-8 rounded bg-primary-default flex items-center justify-center text-white">
                    <mat-icon class="text-sm">restaurant</mat-icon>
                </div>
                <span class="font-semibold tracking-tight">ComidasApp</span>
            </div>
        </div>

        <div class="p-2">
            <mat-nav-list>
                <a *ngFor="let item of menu" [routerLink]="item.link"
                    routerLinkActive="bg-white shadow-sm text-fg-default font-semibold border-border-muted"
                    class="rounded-md mb-1 text-fg-muted hover:bg-gray-200 transition-all border border-transparent no-underline flex items-center px-3 py-2">
                    <mat-icon class="mr-3 text-fg-muted icon-sm">{{item.icon}}</mat-icon>
                    <span class="text-sm">{{item.label}}</span>
                </a>
            </mat-nav-list>
        </div>
    </mat-sidenav>

    <mat-sidenav-content class="bg-canvas-default flex flex-col">

        <mat-toolbar
            class="!bg-canvas-default !text-fg-default border-b border-border-default h-16 px-4 shadow-header flex justify-between items-center">
        
            <div class="flex items-center">
                <button mat-icon-button (click)="drawer.toggle()" class="mr-2 lg:hidden text-fg-muted">
                    <mat-icon>menu</mat-icon>
                </button>
                <span class="text-sm font-medium text-fg-muted">Dashboard / Resumen</span>
            </div>
        
            <div class="flex items-center gap-3">
                <span class="text-sm font-medium hidden sm:block">
                    Hola, {{ userName$ | async }}
                </span>
        
                <button mat-icon-button [matMenuTriggerFor]="menuUser"
                    class="border border-border-default rounded-full !w-10 !h-10 !p-0 !flex items-center justify-center overflow-hidden">
                    <img [src]="userPhoto$ | async" class="!w-full !h-full object-cover rounded-full" alt="Avatar">
                </button>
            </div>
        
            <mat-menu #menuUser="matMenu" class="mt-2">
                <button mat-menu-item routerLink="/profile">
                    <mat-icon>person</mat-icon> <span>Perfil</span>
                </button>
                <mat-divider></mat-divider>
        
                <button mat-menu-item (click)="logout()" class="text-danger-DEFAULT">
                    <mat-icon color="warn">logout</mat-icon> <span>Salir</span>
                </button>
            </mat-menu>
        </mat-toolbar>

        <main class="flex-grow p-6 overflow-y-auto bg-white">
            <div class="max-w-6xl mx-auto">
                <router-outlet></router-outlet>
            </div>
        </main>

    </mat-sidenav-content>
</mat-sidenav-container>