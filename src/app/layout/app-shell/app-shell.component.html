<!-- src/app/layout/app-shell/app-shell.component.html -->
<mat-sidenav-container class="shell-container">
    <mat-sidenav #drawer class="shell-sidenav" [mode]="(isDesktop$ | async) ? 'side' : 'over'"
        [opened]="(isDesktop$ | async) ? true : false" [disableClose]="false" (backdropClick)="closeMenu()">

        <div class="sidenav-header d-flex align-items-center justify-content-between px-3 py-2">
            <div class="d-flex align-items-center gap-2">
                <mat-icon>restaurant</mat-icon>
                <strong>ComidasApp</strong>
            </div>
            <button mat-icon-button aria-label="Cerrar menú" class="d-lg-none" (click)="closeMenu()">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <mat-divider></mat-divider>

        <!-- OJO: aquí ya no usamos pipes en acciones -->
        <mat-nav-list (click)="onNavListClick()">
            <a mat-list-item *ngFor="let item of menu" [routerLink]="item.link">
                <mat-icon matListItemIcon>{{item.icon}}</mat-icon>
                <span matListItemTitle>{{item.label}}</span>
            </a>
        </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content>
        <mat-toolbar color="primary" class="px-2">
            <button mat-icon-button aria-label="Abrir menú" class="me-2" (click)="toggleMenu()">
                <mat-icon>menu</mat-icon>
            </button>

            <span class="toolbar-title">Dashboard</span>
            <span class="flex-grow-1"></span>

            <button mat-icon-button [matMenuTriggerFor]="menuUser">
                <mat-icon>account_circle</mat-icon>
            </button>
            <mat-menu #menuUser="matMenu">
                <button mat-menu-item routerLink="/profile"><mat-icon>person</mat-icon> Perfil</button>
                <button mat-menu-item routerLink="/login"><mat-icon>logout</mat-icon> Salir</button>
            </mat-menu>
        </mat-toolbar>

        <!-- ////////// -->

        <div class="container my-3">
            <div class="row g-3">
                <div class="col-12 col-md-6 col-xl-3">
                    <mat-card>
                        <mat-card-header>
                            <mat-card-title>Plan actual</mat-card-title>
                        </mat-card-header>
                        <mat-card-content>Días planificados: 12 / 30</mat-card-content>
                    </mat-card>
                </div>
        
                <div class="col-12 col-md-6 col-xl-3">
                    <mat-card>
                        <mat-card-header>
                            <mat-card-title>Presupuesto</mat-card-title>
                        </mat-card-header>
                        <mat-card-content>$ 42.500 estimado</mat-card-content>
                    </mat-card>
                </div>
        
                <div class="col-12 col-lg-6">
                    <mat-card>
                        <mat-card-header>
                            <mat-card-title>Calendario (resumen)</mat-card-title>
                        </mat-card-header>
                        <mat-card-content>
                            <div class="placeholder">Calendario</div>
                        </mat-card-content>
                    </mat-card>
                </div>
        
                <div class="col-12 col-lg-6">
                    <mat-card>
                        <mat-card-header>
                            <mat-card-title>Recetas destacadas</mat-card-title>
                        </mat-card-header>
                        <mat-card-content>
                            <div class="row g-2">
                                <div class="col-6">
                                    <mat-card appearance="outlined"><mat-card-content>Porotos
                                            granados</mat-card-content></mat-card>
                                </div>
                                <div class="col-6">
                                    <mat-card appearance="outlined"><mat-card-content>Charquicán</mat-card-content></mat-card>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        
            <div class="row mt-3">
                <div class="col-12">
                    <router-outlet></router-outlet>
                </div>
            </div>
        </div>

    </mat-sidenav-content>
</mat-sidenav-container>